(()=>{"use strict";const t=function(){function t(t,e,n,r){this.providedAnswer="",this.id=t,this.text=e,this.options=n,this.correctAnswer=r}return t.prototype.answer=function(t){if(this.isAnswered())throw new Error("Can not answer twice on the same question");return this.providedAnswer=t,t===this.correctAnswer},t.prototype.recallAnswer=function(){this.providedAnswer=""},t.prototype.render=function(t){if(this.isAnswered())return this.renderSummary();var e=document.createElement("div"),n="";n+='<p class="test-question">'+this.id+". "+this.text+"</p>";for(var r=0,i=this.options;r<i.length;r++){var s=i[r];n+='<div class="answer-option">   <input type="radio" name="answer" value="'+s+'"/>   <label for="answer">'+s+"</label></div>"}return e.innerHTML=n,e.querySelectorAll('input[type="radio"]').forEach((function(e){var n=e;n.addEventListener("click",(function(){return t(n.value)}))})),e},t.prototype.renderSummary=function(){var t=document.createElement("div"),e="";return e+="<p>"+this.id+". "+this.text+"</p>",this.providedAnswer===this.correctAnswer?e+="<p>✅ "+this.providedAnswer+"</p>":e+="<p>⚠️ "+this.providedAnswer+" (правильно: "+this.correctAnswer+")</p>",t.innerHTML=e,t},t.prototype.isAnswered=function(){return""!==this.providedAnswer},t}();const e=function(){function t(t){this.questions=t,this.currentQuestionNumber=0,this.result=[]}return t.prototype.getCurrentQuestion=function(){var t;return null!==(t=this.questions[this.currentQuestionNumber])&&void 0!==t?t:null},t.prototype.answer=function(t){var e=this.getCurrentQuestion();null!==e?(e.answer(t),this.result[this.currentQuestionNumber]=e,this.currentQuestionNumber+=1):console.error("Runtime error: there are no questions left")},t.prototype.getResult=function(){return this.result},t.prototype.reset=function(){this.result=[],this.currentQuestionNumber=0;for(var t=0,e=this.questions;t<e.length;t++){e[t].recallAnswer()}},t}();var n=function(){function t(t){this.testUI=document.getElementById("test"),this.test=t,document.getElementById("content").style.display="none"}return t.prototype.render=function(){var t=this;this.testUI.style.display="block";var e,n=this.test.getCurrentQuestion();e=null!==n?n.render((function(e){t.test.answer(e),t.render()})):this.renderResult(),this.testUI.replaceChildren(e)},t.prototype.renderResult=function(){for(var t=this,e=document.createElement("div"),n=0,r=this.test.getResult();n<r.length;n++){var i=r[n];e.appendChild(i.render((function(){})))}var s=document.createElement("button");return s.innerText="Начать тест заново",s.addEventListener("click",(function(){t.test.reset(),t.render()})),e.appendChild(s),e},t}();const r=n;const i=function(){function n(){}return n.createTranslationTest=function(n){var i=function(){return.5-Math.random()},s=function(t,e){var r=Object.values(n).sort(i);if(r.length-1<e)throw new Error("Requested more translations than we can provide");for(var s=[t];s.length<e+1;){var o=r.shift();o!==t&&s.push(o)}return s.sort(i)},o=[],u=1;for(var c in n)o.push(new t((u++).toString(),'Как сказать "'+c+'"?',s(n[c],3),n[c]));return new r(new e(o))},n.createChoiceTest=function(n){for(var i=[],s=1,o=0,u=n;o<u.length;o++){var c=u[o];i.push(new t((s++).toString(),c.text,c.choices,c.answer))}return new r(new e(i))},n}();document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelectorAll("[data-description]"),e=document.createElement("span");e.className="tooltip",e.style.visibility="hidden",document.body.appendChild(e);for(var n=function(t){if("visible"!==e.style.visibility){var n=function(t){var e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY}}(t.target);e.style.visibility="visible",e.innerText=t.target.dataset.description,e.style.left=n.left+"px",e.style.top=n.top-20+"px"}},r=function(){e.style.visibility="hidden",e.innerText=""},i=0;i<t.length;i++)t[i].addEventListener("mouseover",n),t[i].addEventListener("mouseout",r)}));var s=window;s.registerTranslationTest=function(t){document.addEventListener("DOMContentLoaded",(function(){document.getElementById("start-test").addEventListener("click",(function(){i.createTranslationTest(t).render()}))}))},s.registerChoiceTest=function(t){document.addEventListener("DOMContentLoaded",(function(){document.getElementById("start-test").addEventListener("click",(function(){i.createChoiceTest(t).render()}))}))}})();